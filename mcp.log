[05/12/25 13:09:00] INFO     Starting server "DateServer"...                                   server.py:207
INFO:     Started server process [44535]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:9000 (Press CTRL+C to quit)
INFO:     127.0.0.1:64347 - "GET /sse HTTP/1.1" 200 OK
INFO:     127.0.0.1:64460 - "POST /messages/?session_id=7077767839ad4a988ca39e2f7025f532 HTTP/1.1" 202 Accepted
ERROR:    Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
  |     result = await app(  # type: ignore[func-returns-value]
  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |         self.scope, self.receive, self.send
  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |     )
  |     ^
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
  |     return await self.app(scope, receive, send)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
  |     await self.middleware_stack(scope, receive, send)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
  |     raise exc
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
  |     await self.app(scope, receive, _send)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/fastmcp/server/http.py", line 59, in __call__
  |     await self.app(scope, receive, send)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
  |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
  |     raise exc
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
  |     await app(scope, receive, sender)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
  |     await self.middleware_stack(scope, receive, send)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
  |     await route.handle(scope, receive, send)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
  |     await self.app(scope, receive, send)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
  |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
  |     raise exc
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
  |     await app(scope, receive, sender)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
  |     response = await f(request)
  |                ^^^^^^^^^^^^^^^^
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/fastmcp/server/http.py", line 206, in sse_endpoint
  |     return await handle_sse(request.scope, request.receive, request._send)  # type: ignore[reportPrivateUsage]
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/fastmcp/server/http.py", line 171, in handle_sse
  |     async with sse.connect_sse(scope, receive, send) as streams:
  |                ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 235, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/fastmcp/low_level/sse_server_transport.py", line 85, in connect_sse
  |     async with anyio.create_task_group() as tg:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/fastmcp/low_level/sse_server_transport.py", line 104, in connect_sse
    |     yield (read_stream, write_stream)
    |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/fastmcp/server/http.py", line 172, in handle_sse
    |     await server._mcp_server.run(
    |     ...<3 lines>...
    |     )
    |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/mcp/server/lowlevel/server.py", line 489, in run
    |     async with AsyncExitStack() as stack:
    |                ~~~~~~~~~~~~~~^^
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 768, in __aexit__
    |     raise exc
    |   File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 751, in __aexit__
    |     cb_suppress = await cb(*exc_details)
    |                   ^^^^^^^^^^^^^^^^^^^^^^
    |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/mcp/shared/session.py", line 209, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
    |     raise BaseExceptionGroup(
    |         "unhandled errors in a TaskGroup", self._exceptions
    |     ) from None
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/mcp/server/session.py", line 146, in _receive_loop
      |     await super()._receive_loop()
      |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/mcp/shared/session.py", line 349, in _receive_loop
      |     await self._received_request(responder)
      |   File "/Users/peter/cursor projects/MCP/venv/lib/python3.13/site-packages/mcp/server/session.py", line 171, in _received_request
      |     raise RuntimeError(
      |         "Received request before initialization was complete"
      |     )
      | RuntimeError: Received request before initialization was complete
      +------------------------------------
INFO:     127.0.0.1:64462 - "GET /sse HTTP/1.1" 200 OK
INFO:     127.0.0.1:64487 - "POST /messages/?session_id=1e6ab86830894bbaa7a6c54f7a6894df HTTP/1.1" 202 Accepted
INFO:     127.0.0.1:64488 - "GET /sse HTTP/1.1" 200 OK
INFO:     127.0.0.1:64487 - "POST /messages/?session_id=d9f3d68309a242189d6a6a356bb5b899 HTTP/1.1" 202 Accepted
INFO:     127.0.0.1:64487 - "POST /messages/?session_id=d9f3d68309a242189d6a6a356bb5b899 HTTP/1.1" 202 Accepted
INFO:     127.0.0.1:64489 - "POST /messages/?session_id=d9f3d68309a242189d6a6a356bb5b899 HTTP/1.1" 202 Accepted
INFO:     127.0.0.1:64487 - "POST /messages/?session_id=d9f3d68309a242189d6a6a356bb5b899 HTTP/1.1" 202 Accepted
INFO:     127.0.0.1:64487 - "POST /messages/?session_id=d9f3d68309a242189d6a6a356bb5b899 HTTP/1.1" 202 Accepted
INFO:     127.0.0.1:64793 - "GET /sse HTTP/1.1" 200 OK
